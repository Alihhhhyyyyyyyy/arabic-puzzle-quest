<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ูุนุจุฉ ุงูุฃูุบุงุฒ ุงูุนุฑุจูุฉ ุงููุชุทูุฑุฉ</title>
<!-- ุฅุถุงูุฉ Google Sign-In API -->
<script src="https://accounts.google.com/gsi/client" async defer></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@600&display=swap');
  
  * {
    box-sizing: border-box;
  }
  
  body {
    margin: 0;
    background: linear-gradient(135deg, #667eea, #764ba2);
    font-family: 'Cairo', sans-serif;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 15px;
    transition: background 0.5s ease;
  }
  
  body.dark-mode {
    background: linear-gradient(135deg, #2c3e50, #3498db);
  }
  
  #game-container {
    background: #2a2258;
    border-radius: 20px;
    width: 420px;
    max-width: 100%;
    padding: 25px 20px;
    box-shadow: 0 0 30px rgba(118, 75, 162, 0.9);
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: filter 0.3s ease, transform 0.3s, background 0.5s;
    position: relative;
  }
  
  body.dark-mode #game-container {
    background: #1a252f;
  }
  
  #game-container.blurred {
    filter: blur(3px);
  }
  
  h1 {
    font-weight: 700;
    font-size: 1.8rem;
    margin: 0 0 20px 0;
    user-select: none;
    text-align: center;
  }
  
  /* Login Screen Styles */
  #login-screen {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  
  #login-screen p {
    font-size: 1.2rem;
    margin-bottom: 20px;
  }
  
  #g_id_signin {
    width: 100%;
    margin-bottom: 15px;
  }
  
  #guest-signin-btn {
    background: #4CAF50;
    color: #fff;
    padding: 12px 25px;
    border-radius: 15px;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    border: none;
    transition: background 0.3s;
  }
  
  #guest-signin-btn:hover {
    background: #45a049;
  }
  
  /* Menu Button Styles */
  #menu-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #5a4a99;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.3s, transform 0.2s;
  }
  
  #menu-btn:hover {
    background: #6a5acd;
    transform: scale(1.1);
  }
  
  #menu-btn:focus {
    outline: none;
  }
  
  /* Side Menu Styles */
  #side-menu {
    position: fixed;
    top: 0;
    right: -250px;
    width: 250px;
    height: 100%;
    background: #f5f7fa;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.2);
    transition: right 0.3s ease;
    z-index: 200;
    display: flex;
    flex-direction: column;
    padding-top: 20px;
  }
  
  #side-menu.open {
    right: 0;
  }
  
  #side-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid #ddd;
  }
  
  #side-menu-header h2 {
    margin: 0;
    font-size: 1.5rem;
    color: #333;
  }
  
  #user-info {
    color: #333;
    font-size: 1rem;
    padding: 15px 20px;
    border-bottom: 1px solid #ddd;
    text-align: center;
  }
  
  #close-menu-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #333;
  }
  
  .menu-item {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    color: #333;
    font-size: 1.2rem;
    cursor: pointer;
    transition: background 0.3s;
    border-bottom: 1px solid #eee;
  }
  
  .menu-item:hover {
    background: #e0e4e9;
  }
  
  .menu-item .icon {
    margin-left: 10px;
    font-size: 1.5rem;
    width: 30px;
    text-align: center;
  }
  
  .menu-item.green .icon { color: #28a745; }
  .menu-item.red .icon { color: #dc3545; }
  .menu-item.gray .icon { color: #6c757d; }
  .menu-item.yellow .icon { color: #ffc107; }
  .menu-item.pink .icon { color: #ff6f61; }
  .menu-item.blue .icon { color: #007bff; }
  .menu-item.purple .icon { color: #800080; }
  
  /* Overlay Styles */
  #overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 150;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
  }
  
  #overlay.visible {
    opacity: 1;
    visibility: visible;
  }
  
  /* Modal Styles for Settings, Stats, and Add Friend */
  .modal {
    display: none;
    background: #3b3270;
    border-radius: 15px;
    padding: 20px;
    width: 100%;
    max-width: 380px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    z-index: 100;
  }
  
  body.dark-mode .modal {
    background: #2c3e50;
  }
  
  .modal.visible {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  .modal h2 {
    margin: 0 0 15px;
    font-size: 1.5rem;
    text-align: center;
  }
  
  .modal-content {
    width: 100%;
    text-align: center;
  }
  
  .close-btn {
    position: absolute;
    top: 10px;
    left: 10px;
    background: #f44336;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    color: #fff;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s;
  }
  
  .close-btn:hover {
    background: #d32f2f;
  }
  
  /* Volume Slider Styles */
  .volume-control {
    margin: 15px 0;
  }
  
  #volume-slider {
    width: 100%;
    -webkit-appearance: none;
    height: 8px;
    background: #444070;
    border-radius: 5px;
    outline: none;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  
  #volume-slider:hover {
    opacity: 1;
  }
  
  #volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: #ffb347;
    border-radius: 50%;
    cursor: pointer;
  }
  
  #volume-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #ffb347;
    border-radius: 50%;
    cursor: pointer;
  }
  
  #topic-selection, #difficulty-selection, #game-play, #end-screen, #login-screen {
    width: 100%;
    display: none;
    flex-direction: column;
    align-items: center;
  }
  
  .visible {
    display: flex !important;
  }
  
  .btn {
    background: #ffb347;
    border: none;
    padding: 12px 25px;
    font-size: 1.2rem;
    border-radius: 15px;
    font-weight: 700;
    cursor: pointer;
    color: #482b0e;
    margin: 8px 0;
    box-shadow: 0 5px 0 #cc8c2b inset;
    width: 100%;
    user-select: none;
    transition: background 0.3s ease;
  }
  
  .btn:hover {
    background: #ff9f1c;
  }
  
  #progress {
    font-size: 1rem;
    margin-bottom: 10px;
    user-select: none;
  }
  
  #timer-container {
    width: 100%;
    height: 10px;
    background: #444070;
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 20px;
  }
  
  #timer-bar {
    width: 100%;
    height: 100%;
    background: #ffb347;
    transition: width 1s linear;
  }
  
  #question {
    font-size: 1.3rem;
    margin-bottom: 20px;
    min-height: 90px;
    text-align: center;
    user-select: none;
    line-height: 1.5;
  }
  
  #choices {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  
  .choice-btn {
    background: #5a4a99;
    padding: 12px 20px;
    border-radius: 15px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    border: none;
    color: #fff;
    text-align: center;
    user-select: none;
    transition: transform 0.2s, background 0.3s;
  }
  
  .choice-btn:hover {
    transform: translateY(-2px);
    background: #6a5acd;
  }
  
  .choice-btn.correct {
    background: #4CAF50;
    color: white;
    animation: flash 0.5s;
  }
  
  .choice-btn.incorrect {
    background: #f44336;
    color: white;
  }
  
  @keyframes flash {
    0%, 100% { background: #4CAF50; }
    50% { background: #7FFF00; }
  }
  
  #feedback {
    margin-top: 15px;
    font-weight: 700;
    font-size: 1.1rem;
    min-height: 28px;
    text-align: center;
    user-select: none;
  }
  
  #score, #high-score {
    margin-top: 15px;
    font-weight: 700;
    font-size: 1.1rem;
    user-select: none;
  }
  
  #hint-btn {
    margin-top: 12px;
    background: #4fc3f7;
    border: none;
    padding: 10px 20px;
    border-radius: 15px;
    font-weight: 700;
    color: #003f5c;
    cursor: pointer;
    user-select: none;
    width: 100%;
    transition: background 0.3s;
  }
  
  #hint-btn:hover {
    background: #29b6f6;
  }
  
  #hint-btn:disabled {
    background: #b0bec5;
    cursor: not-allowed;
  }
  
  #combo-counter {
    font-size: 1rem;
    margin-top: 5px;
    user-select: none;
    color: #fff9c4;
  }
  
  #level-container {
    width: 100%;
    margin-bottom: 15px;
  }
  
  #xp-bar {
    height: 100%;
    width: 0%;
    background: #4CAF50;
    border-radius: 5px;
    transition: width 0.5s ease;
  }
  
  #leaderboard {
    width: 100%;
    margin-top: 20px;
    display: none;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    padding: 10px;
  }
  
  .leaderboard-entry {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .leaderboard-entry.top-three {
    background: rgba(255, 215, 0, 0.1);
    font-weight: bold;
    border-radius: 5px;
    padding: 8px 10px;
  }
  
  .leaderboard-entry:last-child {
    border-bottom: none;
  }
  
  .achievement-popup {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #FFD700;
    color: #000;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    z-index: 100;
    animation: slideIn 0.5s forwards;
    max-width: 300px;
  }
  
  .daily-reward-popup {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #28a745;
    color: #fff;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    z-index: 100;
    animation: slideDown 0.5s forwards;
    max-width: 90%;
  }
  
  .level-up-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color: #000;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.7);
    z-index: 1000;
    text-align: center;
    animation: pulse 1.5s infinite;
    max-width: 90%;
    width: 300px;
  }
  
  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  @keyframes slideDown {
    from { transform: translate(-50%, -100%); opacity: 0; }
    to { transform: translate(-50%, 0); opacity: 1; }
  }
  
  @keyframes pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.05); }
  }
  
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    20%, 40%, 60%, 80% { transform: translateX(10px); }
  }
  
  @keyframes fall {
    to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
  }
  
  .confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background-color: #FFD700;
    border-radius: 50%;
    z-index: 1000;
    animation: fall 2s linear forwards;
    pointer-events: none;
  }
  
  #badges-section {
    border-top: 1px solid #ddd;
    margin-top: 15px;
    padding-top: 15px;
    display: none;
    width: 100%;
  }
  
  .badge-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    background: #e0e4e9;
    border-radius: 8px;
    margin-bottom: 8px;
    color: #333;
  }
  
  .badge-item span:first-child {
    font-weight: bold;
  }
  
  .badge-item span:last-child {
    font-size: 1.8rem;
    margin-left: 10px;
  }
  
  /* Style for settings checkboxes */
  .modal-content label {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 10px 0;
    cursor: pointer;
  }
  
  .modal-content input[type="checkbox"] {
    margin-left: 10px;
    width: 18px;
    height: 18px;
    cursor: pointer;
  }
  
  @media (max-width: 450px) {
    #game-container {
      width: 100%;
      padding: 20px 15px;
    }
    
    h1 {
      font-size: 1.5rem;
    }
    
    #question {
      font-size: 1.2rem;
      min-height: 70px;
    }
    
    .btn {
      font-size: 1rem;
      padding: 15px;
      margin: 10px 0;
    }
    
    .choice-btn {
      padding: 15px 10px;
      font-size: 1rem;
      margin: 5px 0;
    }
    
    #menu-btn {
      top: 10px;
      right: 10px;
      width: 35px;
      height: 35px;
      font-size: 1rem;
    }
    
    .modal {
      width: 90%;
      padding: 15px;
    }
    
    .modal h2 {
      font-size: 1.3rem;
    }
    
    #side-menu {
      width: 200px;
      right: -200px;
    }
    
    #side-menu.open {
      right: 0;
    }
    
    .menu-item {
      font-size: 1rem;
      padding: 12px 15px;
    }
    
    .menu-item .icon {
      font-size: 1.3rem;
      width: 25px;
    }
    
    .level-up-popup {
      width: 90%;
      padding: 20px;
    }
  }
</style>
</head>
<body>

<!-- Overlay -->
<div id="overlay"></div>

<div id="game-container">
  <h1>ูุนุจุฉ ุงูุฃูุบุงุฒ ุงูุนุฑุจูุฉ</h1>
  
  <!-- Menu Button -->
  <button id="menu-btn">โฐ</button>
  
  <!-- ูุธุงู ุงููุณุชููุงุช -->
  <div id="level-container">
    <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
      <span id="level-display">ุงููุณุชูู: 1</span>
      <span id="xp-display">0/100 XP</span>
    </div>
    <div style="width:100%; height:10px; background:#444070; border-radius:5px;">
      <div id="xp-bar"></div>
    </div>
  </div>
  
  <!-- Login Screen -->
  <section id="login-screen" class="visible">
    <p>ูุฑุญุจูุง! ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจู:</p>
    <div id="g_id_signin" 
         data-type="standard"
         data-size="large"
         data-theme="outline"
         data-text="sign_in_with"
         data-shape="rectangular"
         data-logo_alignment="left">
    </div>
    <button id="guest-signin-btn">ุชุณุฌูู ูุถูู</button>
  </section>
  
  <!-- Topic Selection -->
  <section id="topic-selection">
    <p style="margin-bottom:15px; font-size:1.2rem; font-weight:600;">ุงุฎุชุฑ ููุถูุน ุงูุฃุณุฆูุฉ:</p>
    <button class="btn" data-topic="general">ุซูุงูุฉ ุนุงูุฉ</button>
    <button class="btn" data-topic="science">ุนููู</button>
    <button class="btn" data-topic="history">ุชุงุฑูุฎ</button>
    <button class="btn" data-topic="sports">ุฑูุงุถุฉ</button>
    <button id="daily-challenge-btn" class="btn" style="background:#4CAF50; display:none;">ุงูุชุญุฏู ุงููููู</button>
  </section>
  
  <!-- Difficulty Selection -->
  <section id="difficulty-selection">
    <p style="margin-bottom:15px; font-size:1.2rem; font-weight:600;">ุงุฎุชุฑ ูุณุชูู ุงูุตุนูุจุฉ:</p>
    <button class="btn" data-difficulty="easy">ุณูู</button>
    <button class="btn" data-difficulty="medium">ูุชูุณุท</button>
    <button class="btn" data-difficulty="hard">ุตุนุจ</button>
  </section>
  
  <!-- Game Play -->
  <section id="game-play">
    <div id="progress"></div>
    <div id="timer-container">
      <div id="timer-bar"></div>
    </div>
    <div id="question"></div>
    <div id="choices"></div>
    <button id="hint-btn">(3) ููุงุท ุงูุชูููุญ ุงููุชุจููุฉ</button>
    <div id="feedback"></div>
    <div id="combo-counter"></div>
    <div id="score"></div>
    <div id="high-score"></div>
    <button id="restart-btn" class="btn">ุฅุนุงุฏุฉ ุชุดุบูู ุงููุนุจุฉ</button>
    <button id="watch-ad-btn" class="btn" style="display:none;">ุดุงูุฏ ุฅุนูุงููุง ููุญุตูู ุนูู ุชูููุญ</button>
  </section>
  
  <!-- End Screen -->
  <section id="end-screen" style="display:none;">
    <div id="end-feedback"></div>
    <button id="restart-game-btn" class="btn">ุฅุนุงุฏุฉ ุงููุนุจ</button>
    <button id="share-result-btn" class="btn">ูุดุงุฑูุฉ ุงููุชูุฌุฉ</button>
  </section>
  
  <!-- Settings Modal -->
  <section id="settings-modal" class="modal">
    <button class="close-btn">ร</button>
    <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
    <div class="modal-content">
      <label>
        <input type="checkbox" id="sound-toggle"> ุชูุนูู ุงูุตูุช
      </label>
      <div class="volume-control">
        <label for="volume-slider">ูุณุชูู ุงูุตูุช:</label>
        <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="1">
      </div>
      <label>
        <input type="checkbox" id="dark-mode-toggle"> ุงููุถุน ุงููููู
      </label>
      <br>
      <button class="btn" id="save-settings-btn">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
    </div>
  </section>
  
  <!-- Stats Modal -->
  <section id="stats-modal" class="modal">
    <button class="close-btn">ร</button>
    <h2>ุงูุฅุญุตุงุฆูุงุช</h2>
    <div class="modal-content">
      <p>ุงููุณุชูู ุงูุญุงูู: <span id="stats-level"></span></p>
      <p>ุฅุฌูุงูู ุงูููุงุท: <span id="stats-score"></span></p>
      <p>ุฃุนูู ูุชูุฌุฉ: <span id="stats-high-score"></span></p>
      <p>ุงูุฅูุฌุงุฒุงุช ุงูููุชููุฉ: <span id="stats-achievements"></span></p>
      <p>ุฅุฌูุงูู ุงูุฃุณุฆูุฉ ุงูุตุญูุญุฉ: <span id="stats-total-correct"></span></p>
      <p>ุนุฏุฏ ุงูุฃูุงู ุงููุชุชุงููุฉ: <span id="stats-streak"></span></p>
      <div id="badges-section">
        <h3>ุงูุดุงุฑุงุช</h3>
        <div id="badges-list"></div>
      </div>
    </div>
  </section>
  
  <!-- Add Friend Modal -->
  <section id="add-friend-modal" class="modal">
    <button class="close-btn">ร</button>
    <h2>ุฅุถุงูุฉ ุตุฏูู</h2>
    <div class="modal-content">
      <input type="text" id="friend-input" placeholder="ุงุณู ุงููุณุชุฎุฏู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
      <button class="btn" id="add-friend-submit">ุฅุถุงูุฉ</button>
    </div>
  </section>
  
  <!-- ููุญุฉ ุงููุชุตุฏุฑูู -->
  <div id="leaderboard"></div>
</div>

<!-- Side Menu -->
<div id="side-menu">
  <div id="side-menu-header">
    <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
    <button id="close-menu-btn">ร</button>
  </div>
  <div id="user-info"></div>
  <div class="menu-item green" id="menu-free-play"><span class="icon">๐ฎ</span>ุงููุนุจ ุงูุญุฑ</div>
  <div class="menu-item purple" id="menu-speed-mode"><span class="icon">โก</span>ูุถุน ุงูุฃูุบุงุฒ ุงูุณุฑูุนุฉ</div>
  <div class="menu-item green" id="menu-challenges"><span class="icon">๐</span>ุงูุชุญุฏูุงุช</div>
  <div class="menu-item red" id="menu-game"><span class="icon">๐</span>ุฅุนุงุฏุฉ ุงููุนุจ</div>
  <div class="menu-item gray" id="menu-stats"><span class="icon">๐</span>ุงูุฅุญุตุงุฆูุงุช</div>
  <div class="menu-item yellow" id="menu-settings"><span class="icon">โ๏ธ</span>ุงูุฅุนุฏุงุฏุงุช</div>
  <div class="menu-item pink" id="menu-add-friend"><span class="icon">๐ฅ</span>ุฏุนูุฉ ุฃุตุฏูุงุก</div>
  <div class="menu-item blue" id="menu-rate"><span class="icon">โญ</span>ุชูููู ุงูุชุทุจูู</div>
  <div class="menu-item gray" id="menu-offline-mode"><span class="icon">๐ด</span>ูุถุน ุจุฏูู ุฅูุชุฑูุช</div>
  <div class="menu-item red" id="menu-logout"><span class="icon">๐ช</span>ุชุณุฌูู ุงูุฎุฑูุฌ</div>
</div>

<script>
  // Database of questions by topics and difficulty (expanded with more questions)
  const questionsDB = {
    general: {
      easy: [
        { question: "ูุง ูู ุฃูุจุฑ ูููุจ ูู ุงููุธุงู ุงูุดูุณูุ", choices: ["ุงูุฃุฑุถ", "ุงููุฑูุฎ", "ุงููุดุชุฑู", "ุงูุฒูุฑุฉ"], answer: "ุงููุดุชุฑู", hint: "ุฅูู ูููุจ ุนููุงู ุบุงุฒู." },
        { question: "ูู ุนุฏุฏ ุฃูุงู ุงูุฃุณุจูุนุ", choices: ["5", "6", "7", "8"], answer: "7", hint: "ุนุฏุฏ ุงูุฃูุงู ูุฃุชู ุจุนุฏ 6." },
        { question: "ูุง ูู ุนุงุตูุฉ ูุตุฑุ", choices: ["ุงูุฅุณููุฏุฑูุฉ", "ุงููุงูุฑุฉ", "ุงูุฌูุฒุฉ", "ุจูุฑุณุนูุฏ"], answer: "ุงููุงูุฑุฉ", hint: "ุชูุน ุนูู ุถูุงู ููุฑ ุงูููู." },
        { question: "ูุง ูู ููู ุงูุณูุงุก ูู ููู ูุดูุณุ", choices: ["ุฃุญูุฑ", "ุฃุฎุถุฑ", "ุฃุฒุฑู", "ุฃุตูุฑ"], answer: "ุฃุฒุฑู", hint: "ูุฑุชุจุท ุจุงูุบูุงู ุงูุฌูู." },
        { question: "ูุง ูู ุฃูุจุฑ ูุญูุท ูู ุงูุนุงููุ", choices: ["ุงููุงุฏุฆ", "ุงูุฃุทูุณู", "ุงูููุฏู", "ุงููุทุจู"], answer: "ุงููุงุฏุฆ", hint: "ูุบุทู ุฃูุซุฑ ูู ุซูุซ ุณุทุญ ุงูุฃุฑุถ." },
        { question: "ูู ุนุฏุฏ ุงููุงุฑุงุช ุงููุฃูููุฉุ", choices: ["4", "5", "6", "7"], answer: "6", hint: "ุงููุงุฑุฉ ุงููุทุจูุฉ ุบูุฑ ูุฃูููุฉ." },
        { question: "ูุง ูู ุงุณู ุงูุนููุฉ ูู ุงูุณุนูุฏูุฉุ", choices: ["ุฏููุงุฑ", "ุฑูุงู", "ุฏุฑูู", "ุฌููู"], answer: "ุฑูุงู", hint: "ูุซู ุนููุฉ ูุทุฑ." },
        { question: "ูุง ูู ุงููุบุฉ ุงูุฑุณููุฉ ููุจุฑุงุฒููุ", choices: ["ุงูุฅุณุจุงููุฉ", "ุงูุฅูุฌููุฒูุฉ", "ุงูุจุฑุชุบุงููุฉ", "ุงููุฑูุณูุฉ"], answer: "ุงูุจุฑุชุบุงููุฉ", hint: "ูุณุชุนูุฑุฉ ุณุงุจูุฉ ูุฏููุฉ ุฃูุฑูุจูุฉ." },
        { question: "ูุง ูู ุฃุทูู ููู ูู ุงูุณูุฉุ", choices: ["21 ููููู", "21 ุฏูุณูุจุฑ", "15 ูุงุฑุณ", "30 ุณุจุชูุจุฑ"], answer: "21 ููููู", hint: "ูุญุฏุซ ูู ุงูุงูููุงุจ ุงูุตููู." },
        { question: "ูุง ูู ุงุณู ุฃูุจุฑ ุฏููุฉ ูู ุงูุนุงูู ูู ุญูุซ ุงููุณุงุญุฉุ", choices: ["ุงูุตูู", "ุฑูุณูุง", "ููุฏุง", "ุงูููุงูุงุช ุงููุชุญุฏุฉ"], answer: "ุฑูุณูุง", hint: "ุชูุชุฏ ุนุจุฑ ูุงุฑุชูู." }
      ],
      medium: [
        { question: "ูุง ูู ุนุงุตูุฉ ุงููุบุฑุจุ", choices: ["ุงูุฏุงุฑ ุงูุจูุถุงุก", "ุงูุฑุจุงุท", "ูุฑุงูุด", "ูุงุณ"], answer: "ุงูุฑุจุงุท", hint: "ูู ูุฏููุฉ ุณุงุญููุฉ ุชูุน ุนูู ุงููุญูุท ุงูุฃุทูุณู." },
        { question: "ูู ูู ูุคูู ูุชุงุจ 'ุงูุฃูุงู'ุ", choices: ["ูุฌูุจ ูุญููุธ", "ุทู ุญุณูู", "ุชูููู ุงูุญููู", "ููุณู ุฅุฏุฑูุณ"], answer: "ุทู ุญุณูู", hint: "ููุจ ุจุนููุฏ ุงูุฃุฏุจ ุงูุนุฑุจู." },
        { question: "ูุง ูู ุงุณู ุฃูุจุฑ ุตุญุฑุงุก ูู ุงูุนุงููุ", choices: ["ุงูุตุญุฑุงุก ุงููุจุฑู", "ุตุญุฑุงุก ุฌูุจู", "ุตุญุฑุงุก ูุงูุงูุงุฑู", "ุตุญุฑุงุก ุฃูุชุงุฑูุชููุง"], answer: "ุตุญุฑุงุก ุฃูุชุงุฑูุชููุง", hint: "ุชูุน ูู ูุงุฑุฉ ุจุงุฑุฏุฉ ุฌุฏูุง." },
        { question: "ูุง ูู ุนุงุตูุฉ ุฃุณุชุฑุงููุงุ", choices: ["ุณูุฏูู", "ููุจูุฑู", "ูุงูุจูุฑุง", "ุจุฑูุฒุจู"], answer: "ูุงูุจูุฑุง", hint: "ููุณุช ุฃูุจุฑ ูุฏู ุฃุณุชุฑุงููุง." },
        { question: "ูุง ูู ุงุณู ุฃุทูู ุณูุณูุฉ ุฌุจุงู ูู ุงูุนุงููุ", choices: ["ุงูุฃูุฏูุฒ", "ุงููููุงูุงูุง", "ุงูุฑููู", "ุงูุฃูุจ"], answer: "ุงูุฃูุฏูุฒ", hint: "ุชูุน ูู ุฃูุฑููุง ุงูุฌููุจูุฉ." },
        { question: "ูู ูู ุงูุนุงูู ุงูุฐู ุงูุชุดู ุงูุฌุงุฐุจูุฉุ", choices: ["ูููุชู", "ุขููุดุชุงูู", "ุบุงููููู", "ุชุณูุง"], answer: "ูููุชู", hint: "ููุงู ุฅูู ุงุณุชูุญู ููุฑุชู ูู ุณููุท ุชูุงุญุฉ." },
        { question: "ูุง ูู ุนุงุตูุฉ ุงููุงุจุงูุ", choices: ["ุทูููู", "ุฃูุณุงูุง", "ูููุชู", "ููุฑูุดููุง"], answer: "ุทูููู", hint: "ุฃูุจุฑ ูุฏููุฉ ูู ุงููุงุจุงู." },
        { question: "ูุง ูู ุงุณู ุฃูุฏู ุฌุงูุนุฉ ูู ุงูุนุงููุ", choices: ["ุงูุฃุฒูุฑ", "ุจูููููุง", "ุฃูุณููุฑุฏ", "ุงููุฑูููู"], answer: "ุงููุฑูููู", hint: "ุชูุน ูู ุงููุบุฑุจ." }
      ],
      hard: [
        { question: "ูู ุนุฏุฏ ุงููุฑุงุช ุงูุชู ุชุฏูุฑ ุงูุฃุฑุถ ุญูู ุงูุดูุณ ูู ุงูุณูุฉุ", choices: ["1", "2", "4", "12"], answer: "1", hint: "ูุฑุฉ ูุงุญุฏุฉ ููุท." },
        { question: "ูุง ูู ุฃุทูู ููุฑ ูู ุงูุนุงููุ", choices: ["ููุฑ ุงูููู", "ููุฑ ุงูุฃูุงุฒูู", "ููุฑ ุงููุงูุบุชุณู", "ููุฑ ุงููุณูุณูุจู"], answer: "ููุฑ ุงูุฃูุงุฒูู", hint: "ููุน ูู ูุงุฑุฉ ุฃูุฑููุง ุงูุฌููุจูุฉ." },
        { question: "ูุง ูู ุงุณู ุฃูู ุฅูุณุงู ุณุงุฑ ุนูู ุงูููุฑุ", choices: ["ููู ุฃุฑูุณุชุฑููุบ", "ุจุฒ ุฃูุฏุฑูู", "ููุฑู ุบุงุบุงุฑูู", "ุฌูู ุฌููู"], answer: "ููู ุฃุฑูุณุชุฑููุบ", hint: "ูุงู ุฌููุฉ ูุดููุฑุฉ ุนู ุฎุทูุฉ ุตุบูุฑุฉ." },
        { question: "ูุง ูู ุนุงุตูุฉ ูุงุฒุงุฎุณุชุงูุ", choices: ["ุฃููุงุชู", "ููุฑ ุณูุทุงู", "ุจูุดููู", "ุฏูุดุงูุจู"], answer: "ููุฑ ุณูุทุงู", hint: "ุชู ุชุบููุฑ ุงุณููุง ุชูุฑูููุง ูุฑุฆูุณ ุณุงุจู." },
        { question: "ูุง ูู ุงุณู ุฃูุฏู ุญุถุงุฑุฉ ูุนุฑููุฉุ", choices: ["ุงูุณููุฑูุฉ", "ุงููุตุฑูุฉ", "ุงูููุฏูุฉ", "ุงูุตูููุฉ"], answer: "ุงูุณููุฑูุฉ", hint: "ูุดุฃุช ูู ุจูุงุฏ ุงูุฑุงูุฏูู." },
        { question: "ูุง ูู ุงุณู ุงูุนููุฉ ูู ุงูููุฏุ", choices: ["ุฑูุจูุฉ", "ูู", "ุฏููุงุฑ", "ููุฑู"], answer: "ุฑูุจูุฉ", hint: "ุชุณุชุฎุฏู ุฃูุถูุง ูู ุฏูู ุฃุฎุฑู." },
        { question: "ูุง ูู ุงูุฏููุฉ ุงูุชู ุงุณุชุถุงูุช ุฃูู ุฃูููุจูุงุฏุ", choices: ["ูุฑูุณุง", "ุงููููุงู", "ุจุฑูุทุงููุง", "ุงูููุงูุงุช ุงููุชุญุฏุฉ"], answer: "ุงููููุงู", hint: "ููุฏ ุงูุฃูุนุงุจ ุงูุฃูููุจูุฉ." }
      ]
    },
    science: {
      easy: [
        { question: "ูุง ูู ุงูุญููุงู ุงูุฐู ูุณูู ููู ุงูุบุงุจุฉุ", choices: ["ุงูููุฑ", "ุงูุฃุณุฏ", "ุงูููุฏ", "ุงูููู"], answer: "ุงูุฃุณุฏ", hint: "ูู ุนุฑู ูุซูู." },
        { question: "ูุง ูู ุงูุบุงุฒ ุงูุฐู ูุชููุณูุ", choices: ["ุงูุฃูุณุฌูู", "ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู", "ุงูููุชุฑูุฌูู", "ุงูููุฏุฑูุฌูู"], answer: "ุงูุฃูุณุฌูู", hint: "ูุดูู ุญูุงูู 21% ูู ุงูุบูุงู ุงูุฌูู." },
        { question: "ูุง ูู ุฃูุจุฑ ุนุถู ูู ุฌุณู ุงูุฅูุณุงูุ", choices: ["ุงูููุจ", "ุงููุจุฏ", "ุงูุฌูุฏ", "ุงูุฑุฆุฉ"], answer: "ุงูุฌูุฏ", hint: "ูุบุทู ุงูุฌุณู ุจุงููุงูู." },
        { question: "ูุง ูู ููู ุงูุฏู ุฏุงุฎู ุงูุฌุณูุ", choices: ["ุฃุฒุฑู", "ุฃุญูุฑ", "ุฃุฎุถุฑ", "ุฃุตูุฑ"], answer: "ุฃุญูุฑ", hint: "ุจุณุจุจ ุงูููููุบููุจูู." },
        { question: "ูุง ูู ุงุณู ุงููููุจ ุงูุฃุญูุฑุ", choices: ["ุงููุฑูุฎ", "ุงููุดุชุฑู", "ุงูุฒูุฑุฉ", "ุนุทุงุฑุฏ"], answer: "ุงููุฑูุฎ", hint: "ูุดุชูุฑ ุจูููู ุงููุญูุฑ." },
        { question: "ูุง ูู ุงููุญุฏุฉ ุงูุชู ุชููุณ ุงููุฒูุ", choices: ["ูุชุฑ", "ููููุบุฑุงู", "ูุชุฑ", "ุซุงููุฉ"], answer: "ููููุบุฑุงู", hint: "ุชุณุชุฎุฏู ูููุงุณ ุงููุชูุฉ." },
        { question: "ูุง ูู ุงููููู ุงูุฑุฆูุณู ูููุงุกุ", choices: ["ุงูููุฏุฑูุฌูู", "ุงููุฑุจูู", "ุงูููุชุฑูุฌูู", "ุงููุจุฑูุช"], answer: "ุงูููุฏุฑูุฌูู", hint: "ููุฌุฏ ูุน ุงูุฃูุณุฌูู ูู ุฌุฒูุก ุงููุงุก." },
        { question: "ูุง ูู ุงุณู ุงููููุจ ุงูุฐู ูุญุชูู ุนูู ุญููุงุชุ", choices: ["ุงููุฑูุฎ", "ุฒุญู", "ุงููุดุชุฑู", "ุงูุฃุฑุถ"], answer: "ุฒุญู", hint: "ูู ุญููุงุช ุจุงุฑุฒุฉ." }
      ],
      medium: [
        { question: "ูุง ูู ุงูุบุงุฒ ุงูุฐู ุชุญุชุงุฌู ูุนุธู ุงููุงุฆูุงุช ุงูุญูุฉ ููุจูุงุกุ", choices: ["ุงูููุชุฑูุฌูู", "ุงููููููู", "ุงูุฃูุณุฌูู", "ุซุงูู ุฃูุณูุฏ ุงููุฑุจูู"], answer: "ุงูุฃูุณุฌูู", hint: "ุฑูุฒู ุงูููููุงุฆู O." },
        { question: "ูุง ูู ุฃูุฑุจ ูููุจ ุฅูู ุงูุดูุณุ", choices: ["ุงูุฒูุฑุฉ", "ุงูุฃุฑุถ", "ุงููุฑูุฎ", "ุนุทุงุฑุฏ"], answer: "ุนุทุงุฑุฏ", hint: "ุฃุตุบุฑ ูููุจ ูู ุงููุธุงู ุงูุดูุณู." },
        { question: "ูุง ูู ุงูุนูุตุฑ ุงูุฃูุซุฑ ููุฑุฉ ูู ุงูุบูุงู ุงูุฌููุ", choices: ["ุงูุฃูุณุฌูู", "ุงูููุชุฑูุฌูู", "ุงูููุฏุฑูุฌูู", "ุงูุฃุฑุฌูู"], answer: "ุงูููุชุฑูุฌูู", hint: "ูุดูู ุญูุงูู 78% ูู ุงูุบูุงู ุงูุฌูู." },
        { question: "ูุง ูู ุงุณู ุงูุนุถู ุงูุฐู ูุถุฎ ุงูุฏูุ", choices: ["ุงููุจุฏ", "ุงูููุจ", "ุงููููุฉ", "ุงูุฑุฆุฉ"], answer: "ุงูููุจ", hint: "ููุจุถ ุจุงุณุชูุฑุงุฑ." },
        { question: "ูุง ูู ูุตุฏุฑ ุงูุทุงูุฉ ุงูุฑุฆูุณู ููุฃุฑุถุ", choices: ["ุงูุฑูุงุญ", "ุงูุดูุณ", "ุงููุงุก", "ุงููุญู"], answer: "ุงูุดูุณ", hint: "ูุณุจุจ ุงูุฏูุฑุฉ ุงููุงุฆูุฉ." },
        { question: "ูุง ูู ุงุณู ุงูุนูุตุฑ ุงูุฐู ูุฑูุฒ ูู ุจู Feุ", choices: ["ุงูุญุฏูุฏ", "ุงูุฐูุจ", "ุงููุถุฉ", "ุงููุญุงุณ"], answer: "ุงูุญุฏูุฏ", hint: "ูุณุชุฎุฏู ูู ุตูุงุนุฉ ุงููููุงุฐ." },
        { question: "ูุง ูู ุงูุณุฑุนุฉ ุงูุชู ููุชูู ุจูุง ุงูุถูุกุ", choices: ["300,000 ูู/ุซ", "150,000 ูู/ุซ", "500,000 ูู/ุซ", "1,000 ูู/ุซ"], answer: "300,000 ูู/ุซ", hint: "ุงูุณุฑุนุฉ ุงููุตูู ูู ุงูููู." }
      ],
      hard: [
        { question: "ูุง ูู ูุญุฏุฉ ููุงุณ ุดุฏุฉ ุงูุชูุงุฑ ุงูููุฑุจุงุฆูุ", choices: ["ุงููููุช", "ุงูุฃูุจูุฑ", "ุงูุฃูู", "ุงููุงุท"], answer: "ุงูุฃูุจูุฑ", hint: "ุณููุช ุนูู ุงุณู ุนุงูู ูุฑูุณู." },
        { question: "ูุง ูู ุงุณู ุงูุฌุณูู ุงูุฃุณุงุณู ููุถูุกุ", choices: ["ุงูุฅููุชุฑูู", "ุงูููุชูู", "ุงูุจุฑูุชูู", "ุงููููุชุฑูู"], answer: "ุงูููุชูู", hint: "ูู ุทุจูุนุฉ ููุฌูุฉ ูุฌุณูููุฉ." },
        { question: "ูุง ูู ุงูุนูุตุฑ ุงูููููุงุฆู ุงูุฃูุซุฑ ููุฑุฉ ูู ุงููููุ", choices: ["ุงูุฃูุณุฌูู", "ุงูููุฏุฑูุฌูู", "ุงููุฑุจูู", "ุงูุญุฏูุฏ"], answer: "ุงูููุฏุฑูุฌูู", hint: "ูุดูู ูุนุธู ุงููุฌูู." },
        { question: "ูุง ูู ุงุณู ุงููุงููู ุงูุฐู ููุต ุนูู ุฃู ููู ูุนู ุฑุฏ ูุนูุ", choices: ["ูุงููู ูููุชู ุงูุฃูู", "ูุงููู ูููุชู ุงูุซุงูุซ", "ูุงููู ุฃูู", "ูุงููู ุจููู"], answer: "ูุงููู ูููุชู ุงูุซุงูุซ", hint: "ูุชุนูู ุจุงูููู." },
        { question: "ูุง ูู ุงุณู ุงููุธุฑูุฉ ุงูุชู ุชุดุฑุญ ุฃุตู ุงููููุ", choices: ["ุงูุงููุฌุงุฑ ุงูุนุธูู", "ุงููุณุจูุฉ ุงูุนุงูุฉ", "ุงููู", "ุงูุชุทูุฑ"], answer: "ุงูุงููุฌุงุฑ ุงูุนุธูู", hint: "ุญุฏุซ ููุฐ ุญูุงูู 13.8 ูููุงุฑ ุณูุฉ." },
        { question: "ูุง ูู ุงุณู ุงูุฌุณูู ุงููุณุคูู ุนู ููู ุงูููุฉ ุงูููููุฉ ุงููููุฉุ", choices: ["ุงูููุชูู", "ุงูุบูููู", "ุงูุจูุฒูู", "ุงูููุงุฑู"], answer: "ุงูุบูููู", hint: "ูุฑุชุจุท ุจุงูููุฉ ุงูููููุฉ." },
        { question: "ูุง ูู ุงุณู ุงููุงุฏุฉ ุงูุชู ุชุดูู ุงููุฌูู ุงููููุชุฑูููุฉุ", choices: ["ุงูุจูุงุฒูุง", "ุงููููุชุฑููุงุช", "ุงูุจุฑูุชููุงุช", "ุงูุฅููุชุฑููุงุช"], answer: "ุงููููุชุฑููุงุช", hint: "ุชุดูู ุฃุฌุณุงููุง ูุซููุฉ ุฌุฏูุง." }
      ]
    }, 
    history: {
      easy: [
        { question: "ูู ุฃู ุนุงู ุงูุชูุช ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉุ", choices: ["1943", "1945", "1950", "1939"], answer: "1945", hint: "ุจุนุฏ 6 ุณููุงุช ูู ุจุฏุงูุชูุง." },
        { question: "ูู ูู ุงูุฎูููุฉ ุงูุฃูู ูู ุงูุฅุณูุงูุ", choices: ["ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุฃุจู ุจูุฑ ุงูุตุฏูู", "ุนูู ุจู ุฃุจู ุทุงูุจ", "ุนุซูุงู ุจู ุนูุงู"], answer: "ุฃุจู ุจูุฑ ุงูุตุฏูู", hint: "ูุงู ุตุฏูู ุงููุจู ูุญูุฏ." },
        { question: "ูุง ูู ุงููุฏููุฉ ุงูุชู ูุงูุช ุนุงุตูุฉ ุงูุฏููุฉ ุงูุฃูููุฉุ", choices: ["ุฏูุดู", "ุจุบุฏุงุฏ", "ุงููุงูุฑุฉ", "ุงููุฏููุฉ"], answer: "ุฏูุดู", hint: "ุชูุน ูู ุณูุฑูุง." },
        { question: "ูู ูู ุงูููู ุงูุฐู ุจูู ุงูุฃูุฑุงูุงุชุ", choices: ["ุฎููู", "ุชูุช ุนูุฎ ุขููู", "ุฑูุณูุณ ุงูุซุงูู", "ุฃููุญุชุจ"], answer: "ุฎููู", hint: "ูู ูุฑู ุดููุฑ ูู ุงูุฌูุฒุฉ." },
        { question: "ูู ุฃู ูุฑู ุจุฏุฃุช ุงูุซูุฑุฉ ุงูุตูุงุนูุฉุ", choices: ["ุงูุณุงุฏุณ ุนุดุฑ", "ุงูุณุงุจุน ุนุดุฑ", "ุงูุซุงูู ุนุดุฑ", "ุงูุชุงุณุน ุนุดุฑ"], answer: "ุงูุซุงูู ุนุดุฑ", hint: "ุจุฏุฃุช ูู ุจุฑูุทุงููุง." },
        { question: "ูู ูู ููุชุดู ุฃูุฑููุงุ", choices: ["ูุฑูุณุชููุฑ ูููููุจูุณ", "ูุงุณูู ุฏู ุฌุงูุง", "ูุงุฌูุงู", "ูุงุฑูู ุจููู"], answer: "ูุฑูุณุชููุฑ ูููููุจูุณ", hint: "ุงูุชุดู ุงูุนุงูู ุงูุฌุฏูุฏ ุนุงู 1492." },
        { question: "ูุง ูู ุนุงุตูุฉ ุงูุฏููุฉ ุงูุนุจุงุณูุฉุ", choices: ["ุฏูุดู", "ุจุบุฏุงุฏ", "ุงููุงูุฑุฉ", "ูุฑุทุจุฉ"], answer: "ุจุบุฏุงุฏ", hint: "ูุฑูุฒ ุงูุญุถุงุฑุฉ ุงูุฅุณูุงููุฉ." }
      ],
      medium: [
        { question: "ูู ูุงู ุฃูู ุฑุฆูุณ ููููุงูุงุช ุงููุชุญุฏุฉุ", choices: ["ุชููุงุณ ุฌููุฑุณูู", "ุฌูุฑุฌ ูุงุดูุทู", "ุฃุจุฑุงูุงู ููููููู", "ุฌูู ุขุฏุงูุฒ"], answer: "ุฌูุฑุฌ ูุงุดูุทู", hint: "ุธูุฑ ุตูุฑุชู ุนูู ุนููุฉ ุงูุฏููุงุฑ." },
        { question: "ูุง ูู ุงูุฏููุฉ ุงูุชู ุญููุช ููุณุทูู ูุจู ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุฃูููุ", choices: ["ุงูุฏููุฉ ุงูุนุซูุงููุฉ", "ุจุฑูุทุงููุง", "ูุฑูุณุง", "ุฑูุณูุง"], answer: "ุงูุฏููุฉ ุงูุนุซูุงููุฉ", hint: "ุญููุช ููุฏุฉ 400 ุนุงู." },
        { question: "ูู ูู ุงููุงุฆุฏ ุงูุฐู ูุชุญ ุงูุฃูุฏูุณุ", choices: ["ุตูุงุญ ุงูุฏูู", "ุทุงุฑู ุจู ุฒูุงุฏ", "ุนูุฑ ุจู ุงูุฎุทุงุจ", "ุฎุงูุฏ ุจู ุงููููุฏ"], answer: "ุทุงุฑู ุจู ุฒูุงุฏ", hint: "ูู ุฌุจู ูุญูู ุงุณูู." },
        { question: "ูู ุฃู ุนุงู ุชู ุงูุชุดุงู ุฃูุฑููุงุ", choices: ["1453", "1492", "1519", "1607"], answer: "1492", hint: "ูุงู ูุฑูุณุชููุฑ ูููููุจูุณ." },
        { question: "ูุง ูู ุงูุญุฑุจ ุงูุชู ููุนุช ุจูู 1939 ู1945ุ", choices: ["ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุฃููู", "ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉ", "ุญุฑุจ ุงูุจุงุฑุฏุฉ", "ุญุฑุจ ููุชูุงู"], answer: "ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุซุงููุฉ", hint: "ุดุงุฑูุช ูููุง ุฏูู ุงูุนุงูู ุงููุจุฑู." },
        { question: "ูู ูู ุงููุงุฆุฏ ุงูุฐู ูุฒู ูุงุจูููู ูู ูุงุชุฑููุ", choices: ["ูููููุบุชูู", "ูููุณูู", "ุจููุชุดุฑ", "ููุชูุฒูู"], answer: "ูููููุบุชูู", hint: "ูุงุฆุฏ ุจุฑูุทุงูู." },
        { question: "ูุง ูู ุงูุญุถุงุฑุฉ ุงูุชู ุงุดุชูุฑุช ุจุงููุฑู ุงููุชุฏุฑุฌุ", choices: ["ุงููุงูุง", "ุงูุฃุฒุชูู", "ุงูุฅููุง", "ุงูุณููุฑูุฉ"], answer: "ุงููุงูุง", hint: "ุชูุน ูู ุฃูุฑููุง ุงููุณุทู." }
      ],
      hard: [
        { question: "ูู ุฃู ุนุงู ุณูุทุช ุบุฑูุงุทุฉ ุขุฎุฑ ูุนุงูู ุงููุณูููู ูู ุงูุฃูุฏูุณุ", choices: ["1492", "1453", "1500", "1485"], answer: "1492", hint: "ูู ููุณ ุนุงู ุงูุชุดุงู ุฃูุฑููุง." },
        { question: "ูู ูู ุงููุงุฆุฏ ุงูุฐู ูุชุญ ุงููุณุทูุทูููุฉุ", choices: ["ุงูุณูุทุงู ุณูููุงู", "ูุญูุฏ ุงููุงุชุญ", "ุณููู ุงูุฃูู", "ุนุซูุงู ุงูุฃูู"], answer: "ูุญูุฏ ุงููุงุชุญ", hint: "ูุชุญูุง ุนุงู 1453." },
        { question: "ูุง ูู ุงูุญุถุงุฑุฉ ุงูุชู ุจูุช ูุงุชุดู ุจูุชุดูุ", choices: ["ุงููุงูุง", "ุงูุฃุฒุชูู", "ุงูุฅููุง", "ุงูุฃูููู"], answer: "ุงูุฅููุง", hint: "ุชูุน ูู ุจูุฑู." },
        { question: "ูู ูู ุงูุฅูุจุฑุงุทูุฑ ุงูุฐู ูุญุฏ ุฃูุฑูุจุง ูู ุงููุฑู ุงูุชุงุณุนุ", choices: ["ุดุงุฑููุงู", "ูุงุจูููู", "ูุณุทูุทูู", "ุฃูุชู ุงูุฃูู"], answer: "ุดุงุฑููุงู", hint: "ููุจ ุจุฃุจู ุฃูุฑูุจุง." },
        { question: "ูู ุฃู ุนุงู ุชู ุชูููุน ูุนุงูุฏุฉ ูุฑุณุงูุ", choices: ["1914", "1919", "1925", "1933"], answer: "1919", hint: "ุฃููุช ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุฃููู." },
        { question: "ูู ูู ุงูุนุงูู ุงูุฐู ุงุฎุชุฑุน ุงููุตุจุงุญ ุงูููุฑุจุงุฆูุ", choices: ["ุชููุงุณ ุฅุฏูุณูู", "ูููููุง ุชุณูุง", "ุฃููุณูุฏุฑ ุจูู", "ุบุงูููู"], answer: "ุชููุงุณ ุฅุฏูุณูู", hint: "ูุฎุชุฑุน ุฃูุฑููู ุดููุฑ." },
        { question: "ูุง ูู ุงูุฏููุฉ ุงูุชู ูุงุฏุช ุงูุซูุฑุฉ ุงูุจูุดููุฉุ", choices: ["ุฑูุณูุง", "ูุฑูุณุง", "ุฃููุงููุง", "ุจุฑูุทุงููุง"], answer: "ุฑูุณูุง", hint: "ุญุฏุซุช ูู ุนุงู 1917." }
      ]
    },
    sports: {
      easy: [
        { question: "ูู ุฃู ุฑูุงุถุฉ ูุณุชุฎุฏู ุงููุถุฑุจ ูุงููุฑุฉ ุงูุตูุฑุงุกุ", choices: ["ูุฑุฉ ุงูุณูุฉ", "ุงูุชูุณ", "ุงูุฌููู", "ุงููุฑูููุช"], answer: "ุงูุชูุณ", hint: "ุชูุนุจ ุนูู ููุนุจ ููุณู ุจุดุจูุฉ." },
        { question: "ูุง ูู ุงุณู ุงูุฑูุงุถุฉ ุงูุชู ุชูุนุจ ุจูุฑุฉ ููุฑููุ", choices: ["ูุฑุฉ ุงูุณูุฉ", "ูุฑุฉ ุงููุฏู", "ุงููููู", "ุงูุจูุณุจูู"], answer: "ูุฑุฉ ุงููุฏู", hint: "ุฃุดูุฑ ุฑูุงุถุฉ ูู ุงูุนุงูู." },
        { question: "ูู ุนุฏุฏ ูุงุนุจู ูุฑุฉ ุงูุณูุฉ ูู ุงูููุนุจ ููู ูุฑููุ", choices: ["5", "6", "7", "11"], answer: "5", hint: "ุนุฏุฏ ุฃูู ูู ูุฑุฉ ุงููุฏู." },
        { question: "ูุง ูู ุงุณู ุงูุฑูุงุถุฉ ุงูุชู ุชุณุชุฎุฏู ูุถุฑุจูุง ูุดุจูุฉ ููุฎูุถุฉุ", choices: ["ุงูุชูุณ", "ูุฑุฉ ุงูุทุงุฆุฑุฉ", "ูุฑุฉ ุงูุฑูุดุฉ", "ุงูุฌููู"], answer: "ูุฑุฉ ุงูุฑูุดุฉ", hint: "ุชุณุชุฎุฏู ุฑูุดุฉ ุจุฏูุงู ูู ูุฑุฉ." },
        { question: "ูุง ูู ุงูุฑูุงุถุฉ ุงูุชู ุชููุนุจ ุนูู ุงูุฌููุฏุ", choices: ["ุงููููู", "ูุฑุฉ ุงููุฏู", "ุงูุชูุณ", "ุงูุจูุณุจูู"], answer: "ุงููููู", hint: "ุชุณุชุฎุฏู ุนุตุง ููุฑุตูุง." },
        { question: "ูุง ูู ุงุณู ุงูุฑูุงุถุฉ ุงูุชู ุชุณุชุฎุฏู ูุฑุฉ ุตุบูุฑุฉ ููุถุฑุจ ุฎุดุจูุ", choices: ["ุงูุฌููู", "ุงููุฑูููุช", "ุงูุจูุณุจูู", "ุงููููู"], answer: "ุงูุจูุณุจูู", hint: "ุดุนุจูุฉ ูู ุฃูุฑููุง." },
        { question: "ูู ุนุฏุฏ ูุงุนุจู ูุฑุฉ ุงูุทุงุฆุฑุฉ ูู ุงูููุนุจ ููู ูุฑููุ", choices: ["4", "5", "6", "7"], answer: "6", hint: "ุชูุนุจ ููู ุดุจูุฉ ูุฑุชูุนุฉ." }
      ],
      medium: [
        { question: "ูู ุนุฏุฏ ูุงุนุจู ูุฑุฉ ุงููุฏู ูู ูู ูุฑููุ", choices: ["10", "11", "12", "9"], answer: "11", hint: "ุจูุง ูููู ุญุงุฑุณ ุงููุฑูู." },
        { question: "ูุง ูู ุงูุฑูุงุถุฉ ุงูุชู ููุนุจ ูููุง ูุงููู ุฌูุฑุฏุงูุ", choices: ["ูุฑุฉ ุงููุฏู", "ูุฑุฉ ุงูุณูุฉ", "ุงูุชูุณ", "ุงูุฌููู"], answer: "ูุฑุฉ ุงูุณูุฉ", hint: "ุงุดุชูุฑ ุจูุฑูู ุดููุงุบู ุจููุฒ." },
        { question: "ูู ุฃู ุนุงู ุฃูููุช ุฃูู ุฃูููุจูุงุฏ ุญุฏูุซุฉุ", choices: ["1896", "1900", "1904", "1912"], answer: "1896", hint: "ุฃูููุช ูู ุฃุซููุง." },
        { question: "ูุง ูู ุงูุฑูุงุถุฉ ุงูุชู ุชุณุชุฎุฏู ููุงุฒุงุช ุซูููุฉุ", choices: ["ุงูููุงููุฉ", "ูุฑุฉ ุงููุฏู ุงูุฃูุฑูููุฉ", "ุงููููู", "ุงููุฑูููุช"], answer: "ุงูููุงููุฉ", hint: "ุฑูุงุถุฉ ุงููุชุงู." },
        { question: "ูู ุนุฏุฏ ุงูุญููุงุช ูู ุดุนุงุฑ ุงูุฃูููุจูุงุฏุ", choices: ["3", "4", "5", "6"], answer: "5", hint: "ุชูุซู ุงููุงุฑุงุช." },
        { question: "ูุง ูู ุงูุฑูุงุถุฉ ุงูุชู ุชููุนุจ ุจูุถุฑุจ ุทููู ูู ููุนุจ ุนุดุจูุ", choices: ["ุงูุชูุณ", "ุงููููู", "ุงูุฌููู", "ุงููุฑูููุช"], answer: "ุงููููู", hint: "ุชุณุชุฎุฏู ูุฑุฉ ุตุบูุฑุฉ." },
        { question: "ูู ูู ุงููุงุนุจ ุงูุฐู ูุงุฒ ุจูุฃุณ ุงูุนุงูู 2014ุ", choices: ["ููุณู", "ุฑููุงูุฏู", "ูููุงุฑ", "ูููุฑ"], answer: "ูููุฑ", hint: "ููุชุฎุจ ุฃููุงููุง." }
      ],
      hard: [
        { question: "ูู ูู ุงููุงุนุจ ุงููุญูุฏ ุงูุฐู ูุงุฒ ุจุซูุงุซ ูุคูุณ ุนุงูููุฉุ", choices: ["ุจูููู", "ูุงุฑุงุฏููุง", "ุฒูุฏุงู", "ุฑููุงูุฏู"], answer: "ุจูููู", hint: "ูุงุนุจ ุจุฑุงุฒููู ูุดููุฑ." },
        { question: "ูุง ูู ุงูุฑูุงุถุฉ ุงูุชู ูุงุฒ ูููุง ููุณูู ุจููุช ุจููุฏุงููุงุช ุฐูุจูุฉุ", choices: ["ุงูุณุจุงุญุฉ", "ุฃูุนุงุจ ุงูููู", "ูุฑุฉ ุงูุณูุฉ", "ุงูุชูุณ"], answer: "ุฃูุนุงุจ ุงูููู", hint: "ูู ุณุจุงูุงุช ุงูุณุฑุนุฉ." },
        { question: "ูู ุฃู ุนุงู ูุงุฒุช ุงูุจุฑุงุฒูู ุจุฃูู ูุฃุณ ุนุงููุ", choices: ["1950", "1958", "1962", "1970"], answer: "1958", hint: "ูุงูุช ูู ุงูุณููุฏ." },
        { question: "ูุง ูู ุงุณู ุงูุฑูุงุถุฉ ุงูุชู ุชููุนุจ ุนูู ุทุงููุฉ ูุน ูุถุงุฑุจ ุตุบูุฑุฉุ", choices: ["ุชูุณ ุงูุทุงููุฉ", "ุงูุจููุงุฑุฏู", "ุงูุดุทุฑูุฌ", "ุงูุฏููููู"], answer: "ุชูุณ ุงูุทุงููุฉ", hint: "ุชุณุชุฎุฏู ูุฑุฉ ุฎูููุฉ." },
        { question: "ูู ูู ุงููุงุนุจ ุงูุฐู ูุงุฒ ุจุฃูุจุฑ ุนุฏุฏ ูู ุจุทููุงุช ุงูุชูุณ ุงููุจุฑูุ", choices: ["ูุงุฏุงู", "ููุฏุฑุฑ", "ุฏุฌูููููุชุด", "ุณุงูุบุฑุงู"], answer: "ุฏุฌูููููุชุด", hint: "ูุงุนุจ ุตุฑุจู." },
        { question: "ูู ุฃู ุนุงู ุฃูููุช ุฃูู ุจุทููุฉ ูููุจูุฏููุ", choices: ["1877", "1885", "1890", "1901"], answer: "1877", hint: "ุฃูุฏู ุจุทููุฉ ุชูุณ." },
        { question: "ูุง ูู ุงูุฑูุงุถุฉ ุงูุชู ุชููุนุจ ุจู 15 ูุงุนุจูุง ูู ูู ูุฑููุ", choices: ["ูุฑุฉ ุงููุฏู", "ุงูุฑุฌุจู", "ูุฑุฉ ุงูุณูุฉ", "ุงููููู"], answer: "ุงูุฑุฌุจู", hint: "ุชุนุฑู ุจุงุณู ุฑุฌุจู ูููููู." }
      ]
    }
  };
    // Game state variables
  let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
  let selectedTopic = null;
  let selectedDifficulty = null;
  let questionsPool = [];
  let currentIndex = 0;
  let score = 0;
  let hintCount = 3;
  let timerDuration = 30;
  let timerInterval = null;
  let comboCount = 0;
  let currentLevel = parseInt(localStorage.getItem('currentLevel')) || 1;
  let xp = parseInt(localStorage.getItem('xp')) || 0;
  let xpToNextLevel = parseInt(localStorage.getItem('xpToNextLevel')) || 100;
  let perfectGame = true;
  let usedHints = false;
  let isSpeedMode = false;
  let totalCorrectAnswers = parseInt(localStorage.getItem('totalCorrectAnswers')) || 0;
  let consecutiveDays = parseInt(localStorage.getItem('consecutiveDays')) || 0;
  let lastLoginDate = localStorage.getItem('lastLoginDate') || null;
  let speedModeStartTime = null;
  let speedModeCorrectCount = 0;
  let offlineQuestions = JSON.parse(localStorage.getItem('offlineQuestions')) || [];
  let coins = parseInt(localStorage.getItem('coins')) || 0;

  // Achievements and Badges
  const achievements = {
    fastAnswer: { name: "ุณุฑูุน ูุงูุจุฑู", desc: "ุฃุฌุจ ุนูู ุณุคุงู ูู ุฃูู ูู 5 ุซูุงู", earned: JSON.parse(localStorage.getItem('achievement_fastAnswer')) || false, badge: "โก" },
    perfectGame: { name: "ูุซุงูู", desc: "ุฃุฌุจ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ุจุดูู ุตุญูุญ", earned: JSON.parse(localStorage.getItem('achievement_perfectGame')) || false, badge: "โญ" },
    hintMaster: { name: "ูุง ุชุญุชุงุฌ ุชูููุญุงุช", desc: "ุฃููู ูุนุจุฉ ุฏูู ุงุณุชุฎุฏุงู ุชูููุญุงุช", earned: JSON.parse(localStorage.getItem('achievement_hintMaster')) || false, badge: "๐" },
    levelUp: { name: "ุงููุณุชูู ุงูุชุงูู", desc: "ูุตูุช ุฅูู ูุณุชูู ุฌุฏูุฏ", earned: JSON.parse(localStorage.getItem('achievement_levelUp')) || false, badge: "โฌ๏ธ" },
    expert: { name: "ุงูุฎุจูุฑ", desc: "ุฃุฌุจ ุนูู 50 ุณุคุงูุงู ุจุดูู ุตุญูุญ", earned: JSON.parse(localStorage.getItem('achievement_expert')) || false, badge: "๐" },
    speedMaster: { name: "ุงูุณุฑุนุฉ ุงููุตูู", desc: "ุฃููู 5 ุฃุณุฆูุฉ ูู ุฃูู ูู ุฏูููุฉ", earned: JSON.parse(localStorage.getItem('achievement_speedMaster')) || false, badge: "โฑ๏ธ" },
    master: { name: "ุงููุนูู", desc: "ูุตู ุฅูู ุงููุณุชูู 10", earned: JSON.parse(localStorage.getItem('achievement_master')) || false, badge: "๐" }
  };

  // Elements
  const loginScreen = document.getElementById('login-screen');
  const topicSelection = document.getElementById('topic-selection');
  const difficultySelection = document.getElementById('difficulty-selection');
  const gamePlay = document.getElementById('game-play');
  const endScreen = document.getElementById('end-screen');
  const progressEl = document.getElementById('progress');
  const timerBar = document.getElementById('timer-bar');
  const questionEl = document.getElementById('question');
  const choicesEl = document.getElementById('choices');
  const hintBtn = document.getElementById('hint-btn');
  const feedback = document.getElementById('feedback');
  const comboCounter = document.getElementById('combo-counter');
  const scoreEl = document.getElementById('score');
  const highScoreEl = document.getElementById('high-score');
  const restartBtn = document.getElementById('restart-btn');
  const dailyChallengeBtn = document.getElementById('daily-challenge-btn');
  const leaderboardEl = document.getElementById('leaderboard');
  const levelDisplay = document.getElementById('level-display');
  const xpDisplay = document.getElementById('xp-display');
  const xpBar = document.getElementById('xp-bar');
  const gameContainer = document.getElementById('game-container');
  const userInfo = document.getElementById('user-info');
  const watchAdBtn = document.getElementById('watch-ad-btn');
  const endFeedback = document.getElementById('end-feedback');
  const restartGameBtn = document.getElementById('restart-game-btn');
  const shareResultBtn = document.getElementById('share-result-btn');
  const badgesSection = document.getElementById('badges-section');
  const badgesList = document.getElementById('badges-list');

  // Side Menu, Overlay, and Modal Elements
  const menuBtn = document.getElementById('menu-btn');
  const sideMenu = document.getElementById('side-menu');
  const closeMenuBtn = document.getElementById('close-menu-btn');
  const overlay = document.getElementById('overlay');
  const menuFreePlay = document.getElementById('menu-free-play');
  const menuSpeedMode = document.getElementById('menu-speed-mode');
  const menuChallenges = document.getElementById('menu-challenges');
  const menuGame = document.getElementById('menu-game');
  const menuStats = document.getElementById('menu-stats');
  const menuSettings = document.getElementById('menu-settings');
  const menuAddFriend = document.getElementById('menu-add-friend');
  const menuRate = document.getElementById('menu-rate');
  const menuOfflineMode = document.getElementById('menu-offline-mode');
  const menuLogout = document.getElementById('menu-logout');
  const settingsModal = document.getElementById('settings-modal');
  const statsModal = document.getElementById('stats-modal');
  const addFriendModal = document.getElementById('add-friend-modal');
  const closeButtons = document.querySelectorAll('.close-btn');
  const saveSettingsBtn = document.getElementById('save-settings-btn');
  const addFriendSubmit = document.getElementById('add-friend-submit');
  const volumeSlider = document.getElementById('volume-slider');
  const guestSignInBtn = document.getElementById('guest-signin-btn');

  // Sound Effects
  const openMenuSound = new Audio('https://www.freesound.org/data/previews/612/612609_5676601-lq.mp3');
  const closeMenuSound = new Audio('https://www.freesound.org/data/previews/612/612608_5676601-lq.mp3');
  const correctSound = new Audio('https://www.soundjay.com/buttons/sounds/success-1.mp3');
  const incorrectSound = new Audio('https://www.soundjay.com/buttons/sounds/error-2.mp3');
  const hintSound = new Audio('https://www.freesound.org/data/previews/170/170143_1676141-lq.mp3');
  const gameEndSound = new Audio('https://www.soundjay.com/misc/sounds/tada-1.mp3');

  // Initialize volume
  let soundVolume = localStorage.getItem('soundVolume') || 1;
  updateSoundVolume(soundVolume);

  // Initialize game
  window.onload = function() {
    if (!currentUser) {
      initializeGoogleSignIn();
    } else {
      loginScreen.classList.remove('visible');
      topicSelection.classList.add('visible');
      updateUserInfo();
      checkDailyReward();
    }
    initGame();
  };
  function initGame() {
    cacheOfflineQuestions();
    if (currentUser) {
      loginScreen.classList.remove('visible');
      topicSelection.classList.add('visible');
      updateUserInfo();
      checkDailyReward();
      setupNotifications();
    } else {
      loginScreen.classList.add('visible');
      topicSelection.classList.remove('visible');
    }
    difficultySelection.classList.remove('visible');
    gamePlay.classList.remove('visible');
    endScreen.classList.remove('visible');
    resetGame();
    setupDailyChallenge();
    displayLeaderboard();
    initializeSettings();
    displayBadges();
  }

  // Google Sign-In Initialization
  function initializeGoogleSignIn() {
    google.accounts.id.initialize({
      client_id: "YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com",
      callback: handleCredentialResponse
    });
    
    google.accounts.id.renderButton(
      document.getElementById("g_id_signin"),
      { theme: "outline", size: "large" }
    );
    
    google.accounts.id.prompt();
  }

  function handleCredentialResponse(response) {
    const profile = jwt_decode(response.credential);
    currentUser = {
      name: profile.name,
      email: profile.email,
      type: 'google',
      token: response.credential
    };
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    loginScreen.classList.remove('visible');
    topicSelection.classList.add('visible');
    updateUserInfo();
    checkDailyReward();
  }

  // Helper function to decode JWT
  function jwt_decode(token) {
    const base64Url = token.split('.')[1];
    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));
    return JSON.parse(jsonPayload);
  }

  function loginAsGuest() {
    currentUser = { 
      name: "ุถูู", 
      email: "guest@example.com",
      type: 'guest' 
    };
    localStorage.setItem('currentUser', JSON.stringify(currentUser));
    loginScreen.classList.remove('visible');
    topicSelection.classList.add('visible');
    updateUserInfo();
    checkDailyReward();
  }

  function resetGame() {
    currentIndex = 0;
    score = 0;
    comboCount = 0;
    perfectGame = true;
    usedHints = false;
    updateScoreDisplay();
    hintCount = 3;
    hintBtn.textContent = '(' + hintCount + ') ููุงุท ุงูุชูููุญ ุงููุชุจููุฉ';
    hintBtn.disabled = false;
    feedback.textContent = '';
    restartBtn.style.display = 'none';
    watchAdBtn.style.display = 'none';
    endScreen.classList.remove('visible');
    timerDuration = isSpeedMode ? 10 : 30;
    closeModals();
    closeSideMenu();
    speedModeCorrectCount = 0;
    speedModeStartTime = null;
  }

  function updateScoreDisplay() {
    scoreEl.textContent = 'ุงูููุงุท: ' + score;
    const highScore = localStorage.getItem('highScore') || 0;
    if (score > highScore) {
      localStorage.setItem('highScore', score);
      highScoreEl.textContent = 'ุฃุนูู ูุชูุฌุฉ: ' + score + ' (ุฌุฏูุฏ!)';
    } else {
      highScoreEl.textContent = 'ุฃุนูู ูุงุชุฌุฉ: ' + highScore;
    }
  }

  function updateComboDisplay() {
    if (comboCount > 1) {
      comboCounter.textContent = 'ุณูุณูุฉ ุตุญูุญุฉ ูุชุชุงููุฉ: ร' + comboCount;
    } else {
      comboCounter.textContent = '';
    }
  }

  function updateLevelSystem(pointsEarned) {
    xp += pointsEarned;
    
    if (xp >= xpToNextLevel) {
      const oldLevel = currentLevel;
      let levelsGained = 0;
      
      while (xp >= xpToNextLevel) {
        currentLevel++;
        levelsGained++;
        xp -= xpToNextLevel;
        xpToNextLevel = Math.floor(xpToNextLevel * 1.5);
      }
      
      showLevelUpPopup(oldLevel, currentLevel);
      achievements.levelUp.earned = true;
      localStorage.setItem('achievement_levelUp', true);
      showAchievement(achievements.levelUp);
      
      if (currentLevel >= 10 && !achievements.master.earned) {
        achievements.master.earned = true;
        localStorage.setItem('achievement_master', true);
        showAchievement(achievements.master);
      }
    }
    
    localStorage.setItem('currentLevel', currentLevel);
    localStorage.setItem('xp', xp);
    localStorage.setItem('xpToNextLevel', xpToNextLevel);
    levelDisplay.textContent = `ุงููุณุชูู: ${currentLevel}`;
    xpDisplay.textContent = `${xp}/${xpToNextLevel} XP`;
    xpBar.style.width = `${(xp / xpToNextLevel) * 100}%`;
  }

  function showLevelUpPopup(oldLevel, newLevel) {
    const popup = document.createElement('div');
    popup.className = 'level-up-popup';
    popup.innerHTML = `
      <h3>๐ ุชููุฆุฉ!</h3>
      <p>ููุฏ ุชูุฏูุช ูู ุงููุณุชูู ${oldLevel} ุฅูู ุงููุณุชูู ${newLevel}</p>
      <p>+${xpToNextLevel} XP ูุทููุจุฉ ูููุณุชูู ุงูุชุงูู</p>
    `;
    document.body.appendChild(popup);
    
    setTimeout(() => popup.remove(), 4000);
  }

  function startTimer() {
    let timeLeft = timerDuration;
    timerBar.style.width = '100%';
    timerInterval = setInterval(() => {
      timeLeft--;
      timerBar.style.width = (timeLeft / timerDuration) * 100 + '%';
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        onTimeUp();
      }
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timerInterval);
  }

  function displayQuestion() {
    const q = questionsPool[currentIndex];
    progressEl.textContent = 'ุงูุณุคุงู ' + (currentIndex + 1) + ' ูู ' + questionsPool.length;
    questionEl.textContent = q.question;
    feedback.textContent = '';
    hintBtn.disabled = (hintCount <= 0);
    choicesEl.innerHTML = '';
    
    q.choices.forEach(choiceText => {
      const btn = document.createElement('button');
      btn.className = 'choice-btn';
      btn.textContent = choiceText;
      btn.addEventListener('click', () => selectAnswer(btn, choiceText));
      choicesEl.appendChild(btn);
    });
    startTimer();
    if (isSpeedMode && speedModeStartTime === null) {
      speedModeStartTime = Date.now();
    }
  }

  function selectAnswer(btn, selectedText) {
    stopTimer();
    const currentQ = questionsPool[currentIndex];
    document.querySelectorAll('.choice-btn').forEach(b => b.disabled = true);
    
    if (selectedText === currentQ.answer) {
      btn.classList.add('correct');
      feedback.textContent = 'ุฅุฌุงุจุฉ ุตุญูุญุฉ! ๐';
      let points = isSpeedMode ? 20 : 10;
      score += points;
      totalCorrectAnswers++;
      localStorage.setItem('totalCorrectAnswers', totalCorrectAnswers);
      comboCount++;
      updateComboDisplay();
      
      if (comboCount > 1) {
        const bonusTime = Math.min(comboCount, 5);
        timerDuration += bonusTime;
        feedback.textContent += ` +${bonusTime} ุซุงููุฉ ูููุคูุช!`;
      }
      
      if (totalCorrectAnswers >= 50 && !achievements.expert.earned) {
        achievements.expert.earned = true;
        localStorage.setItem('achievement_expert', true);
        showAchievement(achievements.expert);
      }
      
      if (isSpeedMode) {
        speedModeCorrectCount++;
        if (speedModeCorrectCount >= 5) {
          const elapsedTime = (Date.now() - speedModeStartTime) / 1000;
          if (elapsedTime < 60 && !achievements.speedMaster.earned) {
            achievements.speedMaster.earned = true;
            localStorage.setItem('achievement_speedMaster', true);
            showAchievement(achievements.speedMaster);
          }
        }
      }
      
      if (localStorage.getItem('soundEnabled') === 'true') {
        correctSound.volume = soundVolume;
        correctSound.play();
      }
      
      celebrateCorrect();
    } else {
      btn.classList.add('incorrect');
      document.querySelectorAll('.choice-btn').forEach(b => {
        if (b.textContent === currentQ.answer) {
          b.classList.add('correct');
        }
      });
      
      feedback.textContent = 'ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ. ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: ' + currentQ.answer;
      comboCount = 0;
      perfectGame = false;
      
      if (localStorage.getItem('soundEnabled') === 'true') {
        incorrectSound.volume = soundVolume;
        incorrectSound.play();
      }
      
      shakeScreen();
    }
    
    checkAchievements();
    updateScoreDisplay();
    updateLevelSystem(isSpeedMode ? 20 : 10);
    
    setTimeout(() => {
      nextQuestion();
    }, 2000);
  }

  function useHint() {
    if (hintCount <= 0) return;
    hintCount--;
    usedHints = true;
    hintBtn.textContent = '(' + hintCount + ') ููุงุท ุงูุชูููุญ ุงููุชุจููุฉ';
    if (hintCount <= 0) hintBtn.disabled = true;
    
    const hintText = questionsPool[currentIndex].hint || 'ูุง ููุฌุฏ ุชูููุญ ููุฐุง ุงูุณุคุงู.';
    feedback.textContent = 'ุงูุชูููุญ: ' + hintText;
    
    if (localStorage.getItem('soundEnabled') === 'true') {
      hintSound.volume = soundVolume;
      hintSound.play();
    }
  }

  function onTimeUp() {
    document.querySelectorAll('.choice-btn').forEach(b => {
      b.disabled = true;
      if (b.textContent === questionsPool[currentIndex].answer) {
        b.classList.add('correct');
      }
    });
    
    feedback.textContent = 'ุงูุชูู ุงูููุช! ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ: ' + questionsPool[currentIndex].answer;
    comboCount = 0;
    perfectGame = false;
    updateComboDisplay();
    
    if (localStorage.getItem('soundEnabled') === 'true') {
      incorrectSound.volume = soundVolume;
      incorrectSound.play();
    }
    
    shakeScreen();
    
    setTimeout(() => {
      nextQuestion();
    }, 2000);
  }

  function nextQuestion() {
    currentIndex++;
    if (currentIndex < questionsPool.length) {
      displayQuestion();
    } else {
      endGame();
    }
  }

  function endGame() {
    gamePlay.classList.remove('visible');
    endScreen.classList.add('visible');
    
    let feedbackText = `
      <h3>๐ฎ ุงูุชูุช ุงููุนุจุฉ!</h3>
      <p>ุงูููุงุท: <strong>${score}</strong></p>
      <p>ุนุฏุฏ ุงูุฃุณุฆูุฉ ุงูุตุญูุญุฉ: <strong>${currentIndex} ูู ${questionsPool.length}</strong></p>
      <p>ุงููุณุชูู: <strong>${currentLevel}</strong></p>
    `;
    
    if (perfectGame) {
      feedbackText += '<p style="color:#4CAF50;">๐ ุฅุฌุงุจุงุช ูุซุงููุฉ!</p>';
      if (!achievements.perfectGame.earned) {
        achievements.perfectGame.earned = true;
        localStorage.setItem('achievement_perfectGame', true);
        showAchievement(achievements.perfectGame);
      }
    }
    
    if (!usedHints) {
      feedbackText += '<p style="color:#2196F3;">๐ง ุจุฏูู ุงุณุชุฎุฏุงู ุชูููุญุงุช!</p>';
      if (!achievements.hintMaster.earned) {
        achievements.hintMaster.earned = true;
        localStorage.setItem('achievement_hintMaster', true);
        showAchievement(achievements.hintMaster);
      }
    }
    
    // ุฅุถุงูุฉ ุงูููุงูุขุช
    const coinsEarned = score * 2;
    coins += coinsEarned;
    localStorage.setItem('coins', coins);
    feedbackText += `<p>๐ฐ ุฑุจุญุช: ${coinsEarned} ุนููุฉ (ุฅุฌูุงูู: ${coins})</p>`;
    
    endFeedback.innerHTML = feedbackText;
    
    if (localStorage.getItem('soundEnabled') === 'true') {
      gameEndSound.volume = soundVolume;
      gameEndSound.play();
    }
    
    updateLeaderboard();
    displayBadges();
  }

  function startTopic(topicId) {
    selectedTopic = topicId;
    topicSelection.classList.remove('visible');
    difficultySelection.classList.add('visible');
  }

  function startDifficulty(difficulty) {
    selectedDifficulty = difficulty;
    difficultySelection.classList.remove('visible');
    gamePlay.classList.add('visible');
    resetGame();
    questionsPool = questionsDB[selectedTopic][selectedDifficulty].slice(0, 5); // Limit to 5 questions
    shuffleArray(questionsPool);
    displayQuestion();
  }

  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }
  / Update user info in side menu
  function updateUserInfo() {
    userInfo.innerHTML = `
      <p><strong>${currentUser.name}</strong></p>
      <p>ุงููุณุชูู: ${currentLevel}</p>
      <p>๐ฐ ${coins} ุนููุฉ</p>
    `;
  }

  // Check and award daily reward
  function checkDailyReward() {
    const today = new Date().toISOString().split('T')[0];
    if (lastLoginDate !== today) {
      consecutiveDays = lastLoginDate === new Date(Date.now() - 86400000).toISOString().split('T')[0] ? consecutiveDays + 1 : 1;
      lastLoginDate = today;
      localStorage.setItem('lastLoginDate', lastLoginDate);
      localStorage.setItem('consecutiveDays', consecutiveDays);
      coins += 50 * consecutiveDays;
      localStorage.setItem('coins', coins);
      showDailyRewardPopup(`ููุงูุฃุฉ ููููุฉ! +${50 * consecutiveDays} ุนููุฉ (ุณูุณูุฉ: ${consecutiveDays} ุฃูุงู)`);
    }
  }

  // Show daily reward popup
  function showDailyRewardPopup(message) {
    const popup = document.createElement('div');
    popup.className = 'daily-reward-popup';
    popup.textContent = message;
    document.body.appendChild(popup);
    setTimeout(() => {
      popup.remove();
    }, 5000);
  }

  // Show achievement popup
  function showAchievement(achievement) {
    const popup = document.createElement('div');
    popup.className = 'achievement-popup';
    popup.innerHTML = `<strong>${achievement.name}</strong><br>${achievement.desc}<br>${achievement.badge}`;
    document.body.appendChild(popup);
    setTimeout(() => {
      popup.remove();
    }, 5000);
  }

  // Celebrate correct answer with confetti
  function celebrateCorrect() {
    for (let i = 0; i < 30; i++) {
      setTimeout(() => {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = ['#FFD700', '#FF6347', '#40E0D0'][Math.floor(Math.random() * 3)];
        confetti.style.animationDuration = Math.random() * 2 + 1 + 's';
        document.body.appendChild(confetti);
        
        setTimeout(() => {
          confetti.remove();
        }, 3000);
      }, i * 50);
    }
  }

  // Shake screen on incorrect answer
  function shakeScreen() {
    gameContainer.style.animation = 'shake 0.5s';
    setTimeout(() => {
      gameContainer.style.animation = '';
    }, 500);
  }

  // Update leaderboard
  function updateLeaderboard() {
    const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
    const userEntry = leaderboard.find(entry => entry.name === currentUser.name) || { name: currentUser.name, score: 0 };
    
    if (score > userEntry.score) {
      userEntry.score = score;
      const index = leaderboard.findIndex(entry => entry.name === currentUser.name);
      if (index > -1) {
        leaderboard[index] = userEntry;
      } else {
        leaderboard.push(userEntry);
      }
      
      leaderboard.sort((a, b) => b.score - a.score);
      leaderboard.splice(10); // Keep top 10
      localStorage.setItem('leaderboard', JSON.stringify(leaderboard));
    }
    
    displayLeaderboard();
  }

  // Display leaderboard
  function displayLeaderboard() {
    const leaderboard = JSON.parse(localStorage.getItem('leaderboard')) || [];
    
    if (leaderboard.length === 0) {
      leaderboardEl.innerHTML = '<p style="text-align:center; padding:20px;">ูุง ุชูุฌุฏ ูุชุงุฆุฌ ุจุนุฏ</p>';
      leaderboardEl.style.display = 'block';
      return;
    }
    
    let html = '<h3>๐ ููุญุฉ ุงููุชุตุฏุฑูู</h3>';
    leaderboard.forEach((entry, index) => {
      const medal = index === 0 ? '๐ฅ' : index === 1 ? '๐ฅ' : index === 2 ? '๐ฅ' : `${index + 1}.`;
      html += `
        <div class="leaderboard-entry ${index < 3 ? 'top-three' : ''}">
          <span>${medal} ${entry.name}</span>
          <span>${entry.score} ููุทุฉ</span>
        </div>
      `;
    });
    
    leaderboardEl.innerHTML = html;
    leaderboardEl.style.display = 'block';
  }

  // Cache questions for offline mode
  function cacheOfflineQuestions() {
    offlineQuestions = [];
    for (let topic in questionsDB) {
      for (let difficulty in questionsDB[topic]) {
        offlineQuestions.push(...questionsDB[topic][difficulty]);
      }
    }
    localStorage.setItem('offlineQuestions', JSON.stringify(offlineQuestions));
  }

  // Setup daily challenge
  function setupDailyChallenge() {
    const today = new Date().toISOString().split('T')[0];
    const lastChallengeDate = localStorage.getItem('lastChallengeDate');
    if (lastChallengeDate !== today) {
      dailyChallengeBtn.style.display = 'block';
    }
  }

  // Start daily challenge
  function startDailyChallenge() {
    selectedTopic = Object.keys(questionsDB)[Math.floor(Math.random() * Object.keys(questionsDB).length)];
    selectedDifficulty = ['easy', 'medium', 'hard'][Math.floor(Math.random() * 3)];
    questionsPool = questionsDB[selectedTopic][selectedDifficulty].slice(0, 5);
    shuffleArray(questionsPool);
    topicSelection.classList.remove('visible');
    gamePlay.classList.add('visible');
    resetGame();
    displayQuestion();
    localStorage.setItem('lastChallengeDate', new Date().toISOString().split('T')[0]);
    dailyChallengeBtn.style.display = 'none';
  }

  // Initialize settings
  function initializeSettings() {
    const soundEnabled = localStorage.getItem('soundEnabled') !== 'false';
    document.getElementById('sound-toggle').checked = soundEnabled;
    volumeSlider.value = soundVolume;
    
    const darkMode = localStorage.getItem('darkMode') === 'true';
    document.getElementById('dark-mode-toggle').checked = darkMode;
    applyDarkMode(darkMode);
  }

  // Apply dark mode
  function applyDarkMode(enabled) {
    if (enabled) {
      document.body.classList.add('dark-mode');
    } else {
      document.body.classList.remove('dark-mode');
    }
  }
  / Save settings
  function saveSettings() {
    const soundEnabled = document.getElementById('sound-toggle').checked;
    soundVolume = volumeSlider.value;
    const darkMode = document.getElementById('dark-mode-toggle').checked;
    
    localStorage.setItem('soundEnabled', soundEnabled);
    localStorage.setItem('soundVolume', soundVolume);
    localStorage.setItem('darkMode', darkMode);
    
    updateSoundVolume(soundVolume);
    applyDarkMode(darkMode);
    closeModals();
  }

  // Update sound volume
  function updateSoundVolume(volume) {
    soundVolume = volume;
    [openMenuSound, closeMenuSound, correctSound, incorrectSound, hintSound, gameEndSound].forEach(sound => {
      sound.volume = volume;
    });
  }

  // Display badges in stats modal
  function displayBadges() {
    badgesList.innerHTML = '';
    let earnedCount = 0;
    
    for (let key in achievements) {
      if (achievements[key].earned) {
        earnedCount++;
        const badgeItem = document.createElement('div');
        badgeItem.className = 'badge-item';
        badgeItem.innerHTML = `<span>${achievements[key].name}</span><span>${achievements[key].badge}</span>`;
        badgesList.appendChild(badgeItem);
      }
    }
    
    badgesSection.style.display = earnedCount ? 'block' : 'none';
  }

  // Check achievements
  function checkAchievements() {
    // Fast answer achievement
    const timeUsed = timerDuration - (timerBar.offsetWidth / timerBar.parentElement.offsetWidth * timerDuration);
    if (timeUsed < 5 && !achievements.fastAnswer.earned) {
      achievements.fastAnswer.earned = true;
      localStorage.setItem('achievement_fastAnswer', true);
      showAchievement(achievements.fastAnswer);
    }
  }

  // Event Listeners
  document.querySelectorAll('#topic-selection .btn').forEach(btn => {
    btn.addEventListener('click', () => startTopic(btn.dataset.topic));
  });

  document.querySelectorAll('#difficulty-selection .btn').forEach(btn => {
    btn.addEventListener('click', () => startDifficulty(btn.dataset.difficulty));
  });

  hintBtn.addEventListener('click', useHint);

  restartBtn.addEventListener('click', () => {
    resetGame();
    gamePlay.classList.remove('visible');
    topicSelection.classList.add('visible');
  });

  restartGameBtn.addEventListener('click', () => {
    resetGame();
    endScreen.classList.remove('visible');
    topicSelection.classList.add('visible');
  });

  shareResultBtn.addEventListener('click', () => {
    const text = `ููุฏ ุณุฌูุช ${score} ููุทุฉ ูู ูุนุจุฉ ุงูุฃูุบุงุฒ ุงูุนุฑุจูุฉ! ๐ ุฌุฑุจูุง ุงูุขู!`;
    if (navigator.share) {
      navigator.share({ 
        title: 'ูุนุจุฉ ุงูุฃูุบุงุฒ ุงูุนุฑุจูุฉ', 
        text: text,
        url: window.location.href 
      });
    } else {
      navigator.clipboard.writeText(text).then(() => {
        alert('ุชู ูุณุฎ ุงููุชูุฌุฉ ุฅูู ุงูุญุงูุธุฉ: ' + text);
      });
    }
  });

  dailyChallengeBtn.addEventListener('click', startDailyChallenge);

  watchAdBtn.addEventListener('click', () => {
    alert('ุดุงูุฏ ุฅุนูุงููุง ููุญุตูู ุนูู ุชูููุญ ุฅุถุงูู!');
    hintCount++;
    hintBtn.textContent = '(' + hintCount + ') ููุงุท ุงูุชูููุญ ุงููุชุจููุฉ';
    hintBtn.disabled = false;
    watchAdBtn.style.display = 'none';
  });

  guestSignInBtn.addEventListener('click', loginAsGuest);

  // Side Menu Event Listeners
  menuBtn.addEventListener('click', () => {
    sideMenu.classList.add('open');
    overlay.classList.add('visible');
    gameContainer.classList.add('blurred');
    if (localStorage.getItem('soundEnabled') === 'true') {
      openMenuSound.play();
    }
  });

  closeMenuBtn.addEventListener('click', closeSideMenu);
  overlay.addEventListener('click', closeSideMenu);

  function closeSideMenu() {
    sideMenu.classList.remove('open');
    overlay.classList.remove('visible');
    gameContainer.classList.remove('blurred');
    if (localStorage.getItem('soundEnabled') === 'true') {
      closeMenuSound.play();
    }
  }

  menuFreePlay.addEventListener('click', () => {
    isSpeedMode = false;
    resetGame();
    closeSideMenu();
    gamePlay.classList.remove('visible');
    topicSelection.classList.add('visible');
  });

  menuSpeedMode.addEventListener('click', () => {
    isSpeedMode = true;
    resetGame();
    closeSideMenu();
    gamePlay.classList.remove('visible');
    topicSelection.classList.add('visible');
  });

  menuChallenges.addEventListener('click', () => {
    alert('ุงูุชุญุฏูุงุช ููุฏ ุงูุชุทููุฑ!');
    closeSideMenu();
  });

  menuGame.addEventListener('click', () => {
    resetGame();
    closeSideMenu();
    gamePlay.classList.remove('visible');
    topicSelection.classList.add('visible');
  });

  menuStats.addEventListener('click', () => {
    closeSideMenu();
    statsModal.classList.add('visible');
    overlay.classList.add('visible');
    gameContainer.classList.add('blurred');
    
    document.getElementById('stats-level').textContent = currentLevel;
    document.getElementById('stats-score').textContent = score;
    document.getElementById('stats-high-score').textContent = localStorage.getItem('highScore') || 0;
    document.getElementById('stats-achievements').textContent = Object.values(achievements).filter(a => a.earned).length;
    document.getElementById('stats-total-correct').textContent = totalCorrectAnswers;
    document.getElementById('stats-streak').textContent = consecutiveDays;
  });

  menuSettings.addEventListener('click', () => {
    closeSideMenu();
    settingsModal.classList.add('visible');
    overlay.classList.add('visible');
    gameContainer.classList.add('blurred');
  });

  menuAddFriend.addEventListener('click', () => {
    closeSideMenu();
    addFriendModal.classList.add('visible');
    overlay.classList.add('visible');
    gameContainer.classList.add('blurred');
  });

  menuRate.addEventListener('click', () => {
    alert('ูููู ุงูุชุทุจูู ูู ูุชุฌุฑ ุงูุชุทุจููุงุช!');
    closeSideMenu();
  });

  menuOfflineMode.addEventListener('click', () => {
    alert('ูุถุน ุจุฏูู ุฅูุชุฑูุช ููุฏ ุงูุชุทููุฑ!');
    closeSideMenu();
  });

  menuLogout.addEventListener('click', () => {
    if (confirm('ูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ')) {
      localStorage.removeItem('currentUser');
      currentUser = null;
      closeSideMenu();
      loginScreen.classList.add('visible');
      topicSelection.classList.remove('visible');
    }
  });

  // Modal Event Listeners
  closeButtons.forEach(btn => {
    btn.addEventListener('click', closeModals);
  });

  function closeModals() {
    settingsModal.classList.remove('visible');
    statsModal.classList.remove('visible');
    addFriendModal.classList.remove('visible');
    overlay.classList.remove('visible');
    gameContainer.classList.remove('blurred');
  }

  saveSettingsBtn.addEventListener('click', saveSettings);

  addFriendSubmit.addEventListener('click', () => {
    const friendInput = document.getElementById('friend-input').value;
    if (friendInput) {
      alert(`ุชู ุฅุฑุณุงู ุฏุนูุฉ ุฅูู ${friendInput}!`);
      document.getElementById('friend-input').value = '';
      closeModals();
    } else {
      alert('ูุฑุฌู ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู.');
    }
  });

  // Setup notifications (mock for web)
  function setupNotifications() {
    if ('Notification' in window && Notification.permission !== 'denied') {
      Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
          setTimeout(() => {
            new Notification('ูุฑุญุจูุง ุจู ูู ูุนุจุฉ ุงูุฃูุบุงุฒ ุงูุนุฑุจูุฉ!', {
              body: 'ุงุณุชุนุฏ ูุชุญุฏูุงุช ููุชุนุฉ ูุงุฎุชุจุงุฑ ูุนูููุงุชู!',
              icon: 'https://cdn-icons-png.flaticon.com/512/686/686455.png'
            });
          }, 2000);
        }
      });
    }
  }
</script>
</body>
</html>
```
